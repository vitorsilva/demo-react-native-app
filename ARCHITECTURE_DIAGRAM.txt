┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                         DEMO REACT NATIVE APP - ARCHITECTURE                            │
│                              (Phase 1 & 2 Complete)                                      │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                            DEVELOPMENT ENVIRONMENT                                       │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  ┌─────────────┐      ┌──────────────┐      ┌───────────────┐      ┌────────────┐     │
│  │   VS Code   │──────│  TypeScript  │──────│    ESLint     │──────│  Prettier  │     │
│  │   (Editor)  │      │  (Language)  │      │  (Linting)    │      │ (Formatter)│     │
│  └─────────────┘      └──────────────┘      └───────────────┘      └────────────┘     │
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐   │
│  │                            Git Workflow                                          │   │
│  │  ┌──────────┐    ┌───────────┐    ┌────────────────┐    ┌─────────────────┐   │   │
│  │  │  Husky   │───→│lint-staged│───→│  Pre-commit    │───→│   Git Commit    │   │   │
│  │  │ (Hooks)  │    │ (Staged)  │    │ Hook (ESLint + │    │  (Conventional) │   │   │
│  │  │          │    │           │    │    Prettier)   │    │                 │   │   │
│  │  └──────────┘    └───────────┘    └────────────────┘    └─────────────────┘   │   │
│  └─────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                             REACT NATIVE APPLICATION                                     │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  ┌────────────────────────────────────────────────────────────────────────────────┐    │
│  │                          Expo SDK 54 (React Native 0.81.4)                      │    │
│  │                              React 19.2.0 (New Architecture)                    │    │
│  └────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
│  ┌───────────────────────┐       ┌──────────────────────┐                              │
│  │   Expo Router 6.0     │       │  React Navigation 7  │                              │
│  │  (File-based routing) │◄──────│   (Bottom Tabs)      │                              │
│  └───────────────────────┘       └──────────────────────┘                              │
│            │                                                                             │
│            ▼                                                                             │
│  ┌────────────────────────────────────────────────────────────────────────────────┐    │
│  │                            App Structure                                        │    │
│  │                                                                                 │    │
│  │  app/_layout.tsx ◄────────── ErrorBoundary ◄────── Sentry Init                │    │
│  │       │                                                                         │    │
│  │       ├─ app/(tabs)/_layout.tsx (Tab Navigation)                               │    │
│  │       │      │                                                                  │    │
│  │       │      ├─ index.tsx (Home Screen) ◄─── useFocusEffect                   │    │
│  │       │      │      │                              │                            │    │
│  │       │      │      ├─ TextInput                   │                            │    │
│  │       │      │      ├─ Button ──► handlePress()    │                            │    │
│  │       │      │      └─ Text Display                │                            │    │
│  │       │      │                                      │                            │    │
│  │       │      └─ explore.tsx (Explore Screen)       │                            │    │
│  │       │                                             │                            │    │
│  │       └─ modal.tsx                                  │                            │    │
│  │                                                      │                            │    │
│  └──────────────────────────────────────────────────────┼────────────────────────────┘ │
│                                                          │                               │
│  ┌───────────────────────────────────────────────────────┼──────────────────────────┐  │
│  │                       Custom Libraries                │                          │  │
│  │                                                        ▼                          │  │
│  │  lib/telemetry.ts ───► tracer (traces) ───────────────────────────────►         │  │
│  │       │                meter (metrics)                                           │  │
│  │       │                                                                           │  │
│  │  lib/analytics.ts ──► screenViewCounter ◄─── useFocusEffect                     │  │
│  │       │                userActionCounter ◄─── handlePress()                      │  │
│  │       │                                                                           │  │
│  │  lib/logger.ts ─────► Pino (structured logging)                                 │  │
│  │                                                                                   │  │
│  │  components/ErrorBoundary.tsx ──► Catch errors ──► Sentry + Pino               │  │
│  │                                                                                   │  │
│  └───────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                         OBSERVABILITY STACK (Docker Compose)                            │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│                          React Native App (localhost:8081)                              │
│                                      │                                                   │
│                    ┌─────────────────┼─────────────────┐                                │
│                    │                 │                 │                                │
│                    ▼                 ▼                 ▼                                │
│         ┌─────────────────┐  ┌──────────────┐  ┌────────────────┐                      │
│         │  TRACES (OTLP)  │  │METRICS (OTLP)│  │  ERRORS (HTTP) │                      │
│         │  Port: 4318     │  │ Port: 4319   │  │  Sentry Cloud  │                      │
│         └────────┬────────┘  └──────┬───────┘  └────────┬───────┘                      │
│                  │                  │                     │                              │
│                  ▼                  ▼                     ▼                              │
│    ┌──────────────────────┐  ┌──────────────────┐  ┌──────────────────┐               │
│    │  Container: Jaeger   │  │ Container: OTel  │  │   Sentry.io      │               │
│    │ ┌──────────────────┐ │  │    Collector     │  │   (Cloud SaaS)   │               │
│    │ │  Jaeger All-in-1 │ │  │ ┌──────────────┐ │  │                  │               │
│    │ │                  │ │  │ │   Receivers  │ │  │ - Stack traces   │               │
│    │ │ - Receives OTLP  │ │  │ │   - OTLP     │ │  │ - Error context  │               │
│    │ │   traces         │ │  │ │   - CORS     │ │  │ - User sessions  │               │
│    │ │ - Stores traces  │ │  │ └──────┬───────┘ │  │ - Breadcrumbs    │               │
│    │ │ - Web UI         │ │  │        │         │  │                  │               │
│    │ │                  │ │  │        ▼         │  │ Dashboard:       │               │
│    │ └──────────────────┘ │  │ ┌──────────────┐ │  │ sentry.io        │               │
│    │                      │  │ │   Exporters  │ │  │                  │               │
│    │ Port 16686 (UI)  ◄───┼──┤ │ - Prometheus │ │  └──────────────────┘               │
│    │ Port 4318 (OTLP)     │  │ │ - Debug      │ │                                      │
│    └──────────────────────┘  │ └──────┬───────┘ │                                      │
│                               │        │         │                                      │
│                               │ Port 8889 (Prom)│                                      │
│                               └────────┬─────────┘                                      │
│                                        │                                                │
│                                        ▼ (scrapes)                                      │
│                          ┌──────────────────────────┐                                   │
│                          │ Container: Prometheus    │                                   │
│                          │ ┌──────────────────────┐ │                                   │
│                          │ │   Prometheus Server  │ │                                   │
│                          │ │                      │ │                                   │
│                          │ │ - Scrapes metrics    │ │                                   │
│                          │ │   every 15 seconds   │ │                                   │
│                          │ │ - Time-series DB     │ │                                   │
│                          │ │ - PromQL queries     │ │                                   │
│                          │ │ - Web UI             │ │                                   │
│                          │ └──────────────────────┘ │                                   │
│                          │                          │                                   │
│                          │ Port 9090 (UI)  ◄────────┼─── Query Interface               │
│                          └──────────────────────────┘                                   │
│                                                                                          │
│  ┌────────────────────────────────────────────────────────────────────────────────┐   │
│  │                        Docker Network: "monitoring"                             │   │
│  │  All containers communicate via container names (not localhost)                 │   │
│  └────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                          │
│  ┌────────────────────────────────────────────────────────────────────────────────┐   │
│  │                          Logs: Pino Console Output                              │   │
│  │  - Structured JSON logs                                                         │   │
│  │  - Trace ID correlation                                                         │   │
│  │  - Component context                                                            │   │
│  └────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                               CI/CD PIPELINE (GitHub Actions)                           │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  Developer Push ──► GitHub Repository                                                   │
│                           │                                                              │
│                           ▼                                                              │
│               ┌────────────────────────┐                                                │
│               │  GitHub Actions Runner │                                                │
│               │   (Ubuntu Latest)      │                                                │
│               └───────────┬────────────┘                                                │
│                           │                                                              │
│        ┌──────────────────┼──────────────────┐                                          │
│        ▼                  ▼                  ▼                                          │
│  ┌──────────┐      ┌──────────┐      ┌──────────────┐                                 │
│  │ Checkout │      │ Setup    │      │  Install     │                                 │
│  │   Code   │ ───► │ Node 22  │ ───► │ Dependencies │                                 │
│  │          │      │ + Cache  │      │  (npm ci)    │                                 │
│  └──────────┘      └──────────┘      └──────┬───────┘                                 │
│                                              │                                          │
│                           ┌──────────────────┼──────────────────┐                      │
│                           ▼                  ▼                  ▼                      │
│                    ┌──────────┐      ┌──────────────┐   ┌──────────────┐             │
│                    │  ESLint  │      │     Jest     │   │   Codecov    │             │
│                    │  (Lint)  │      │(Tests + Cov) │   │   Upload     │             │
│                    │          │      │  Jest 29.7.0 │   │              │             │
│                    └──────────┘      └──────────────┘   └──────────────┘             │
│                           │                  │                  │                      │
│                           └──────────────────┴──────────────────┘                      │
│                                              │                                          │
│                                              ▼                                          │
│                                    ┌──────────────────┐                                │
│                                    │ Status Badge     │                                │
│                                    │ (Pass/Fail)      │                                │
│                                    └──────────────────┘                                │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                  TESTING INFRASTRUCTURE                                  │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐   │
│  │                              Jest 29.7.0                                         │   │
│  │                          (jest-expo preset)                                      │   │
│  └────────────────────────────────┬─────────────────────────────────────────────────┘  │
│                                   │                                                      │
│                    ┌──────────────┼──────────────┐                                      │
│                    ▼              ▼              ▼                                      │
│         ┌───────────────┐  ┌──────────────┐  ┌────────────────┐                       │
│         │ @testing-lib/ │  │  jest-native │  │   babel-jest   │                       │
│         │ react-native  │  │  (matchers)  │  │  (transpiler)  │                       │
│         └───────────────┘  └──────────────┘  └────────────────┘                       │
│                 │                                                                        │
│                 ▼                                                                        │
│    ┌──────────────────────────────┐                                                    │
│    │  app/(tabs)/__tests__/       │                                                    │
│    │    index.test.tsx            │                                                    │
│    │                               │                                                    │
│    │  - render() components        │                                                    │
│    │  - fireEvent() interactions   │                                                    │
│    │  - expect() assertions        │                                                    │
│    └──────────────────────────────┘                                                    │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                            BUILD & DEPLOYMENT (EAS)                                      │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  Developer ──► eas build --platform android --profile preview                           │
│                                    │                                                     │
│                                    ▼                                                     │
│                        ┌────────────────────────┐                                       │
│                        │   EAS Build (Cloud)    │                                       │
│                        │                        │                                       │
│                        │  - Builds APK/AAB      │                                       │
│                        │  - Auto-increment ver  │                                       │
│                        │  - Cloud infrastructure│                                       │
│                        └───────────┬────────────┘                                       │
│                                    │                                                     │
│                                    ▼                                                     │
│                        ┌────────────────────────┐                                       │
│                        │  Download APK/AAB      │                                       │
│                        │  Install on device     │                                       │
│                        └────────────────────────┘                                       │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                KEY TECHNOLOGIES SUMMARY                                  │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  Frontend Framework:  React Native 0.81.4 (New Architecture) + React 19.2.0            │
│  Development Platform: Expo SDK 54                                                      │
│  Language:            TypeScript                                                        │
│  Navigation:          Expo Router 6.0 + React Navigation 7                             │
│                                                                                          │
│  Code Quality:        ESLint + Prettier + Husky + lint-staged                          │
│  Testing:             Jest 29.7.0 + React Native Testing Library                       │
│  CI/CD:               GitHub Actions + Codecov                                          │
│  Build:               EAS Build                                                         │
│                                                                                          │
│  Observability:                                                                          │
│    - Traces:          OpenTelemetry → Jaeger                                           │
│    - Metrics:         OpenTelemetry → OTel Collector → Prometheus                     │
│    - Logs:            Pino (structured JSON)                                           │
│    - Errors:          Sentry                                                           │
│    - Analytics:       Custom (OpenTelemetry counters)                                  │
│                                                                                          │
│  Container Orchestration: Docker Compose                                                │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                               ACCESS URLS (Running Services)                             │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  React Native App:      http://localhost:8081 (Metro Bundler)                          │
│  Jaeger UI (Traces):    http://localhost:16686                                         │
│  Prometheus UI (Metrics): http://localhost:9090                                        │
│  Sentry Dashboard:      https://sentry.io                                              │
│  GitHub Actions:        https://github.com/[username]/demo-react-native-app/actions    │
│  Codecov:               https://codecov.io/gh/[username]/demo-react-native-app         │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                              DATA FLOW EXAMPLE: BUTTON PRESS                            │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  User Presses Button                                                                    │
│         │                                                                                │
│         ▼                                                                                │
│  handlePress() executes                                                                 │
│         │                                                                                │
│         ├──► tracer.startSpan('button.press') ──────────► Jaeger (Trace)              │
│         │        │                                              │                        │
│         │        └─ span.setAttribute('input.value', ...)      │                        │
│         │        └─ span.end()                                 │                        │
│         │                                                       │                        │
│         ├──► analytics.userAction('button_press') ────► OTel Collector ──► Prometheus  │
│         │        │                                         (Counter +1)                  │
│         │        └─ metadata: { inputLength: '5' }                                     │
│         │                                                                                │
│         ├──► log.info('Button pressed') ───────────────► Console (Pino structured log) │
│         │        │                                                                       │
│         │        └─ includes traceId for correlation                                   │
│         │                                                                                │
│         └──► setDisplayText(inputValue) ───────────────► UI Updates                    │
│                                                                                          │
│  If error occurs:                                                                       │
│         └──► ErrorBoundary catches ──┬──► Pino logs error                              │
│                                       └──► Sentry.Native.captureException()            │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
